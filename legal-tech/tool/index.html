<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>FieldLex 契約リスクスキャナー</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:-apple-system,sans-serif;background:#f0f2f5;color:#1a1a2e;line-height:1.6}
.header{background:linear-gradient(135deg,#1a1a2e,#16213e);color:#fff;padding:16px 20px;text-align:center}
.header h1{font-size:1.3em;margin-bottom:4px}
.header p{font-size:.78em;opacity:.85}
.badge{display:inline-block;background:#e94560;color:#fff;font-size:.65em;padding:2px 8px;border-radius:10px;margin-top:4px}
.container{max-width:900px;margin:0 auto;padding:12px}
.card{background:#fff;border-radius:10px;padding:16px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,.08)}
.card h2{font-size:1em;margin-bottom:8px;color:#16213e;border-left:4px solid #e94560;padding-left:8px}
label{font-weight:600;font-size:.85em;display:block;margin-bottom:4px}
select,textarea{width:100%;padding:10px;border:2px solid #ddd;border-radius:8px;font-size:.9em;font-family:inherit}
textarea{height:200px;resize:vertical}
select:focus,textarea:focus{border-color:#e94560;outline:none}
.row{display:flex;gap:10px;margin-bottom:10px;flex-wrap:wrap}
.row>*{flex:1;min-width:200px}
.btn{width:100%;padding:14px;background:linear-gradient(135deg,#e94560,#c23152);color:#fff;border:none;border-radius:8px;font-size:1em;font-weight:700;cursor:pointer;margin-top:8px}
.btn:hover{opacity:.9}
.btn:active{transform:scale(.98)}
#result{display:none}
.level-box{text-align:center;padding:20px;border-radius:10px;margin-bottom:12px;color:#fff;font-size:1.1em;font-weight:700}
.lv-low{background:#27ae60}.lv-mid{background:#f39c12}.lv-high{background:#e74c3c}.lv-expert{background:#8e44ad}
.stats{display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap}
.stat{flex:1;min-width:70px;text-align:center;padding:10px;border-radius:8px;font-size:.8em}
.stat b{display:block;font-size:1.4em}
.sr{background:#fde8ec;color:#c0392b}.sy{background:#fef9e7;color:#b7950b}.sb{background:#ebf5fb;color:#2980b9}
.hit{margin-bottom:10px;padding:10px;border-radius:8px;border-left:4px solid #ccc;font-size:.85em}
.hit.r{border-color:#e74c3c;background:#fef2f2}.hit.y{border-color:#f1c40f;background:#fffef2}.hit.b{border-color:#3498db;background:#f2f8ff}
.hit .tag{display:inline-block;padding:1px 6px;border-radius:4px;font-size:.7em;color:#fff;margin-right:6px}
.hit .tag.r{background:#e74c3c}.hit .tag.y{background:#f1c40f;color:#333}.hit .tag.b{background:#3498db}
.hit .phrase{font-weight:700}
.hit .warn{margin-top:4px;color:#555}
.preview{background:#fafafa;border:1px solid #e0e0e0;border-radius:8px;padding:12px;font-size:.85em;white-space:pre-wrap;word-break:break-all;max-height:400px;overflow-y:auto;line-height:1.8}
.hl-r{background:#ffcccc;border-bottom:2px solid #e74c3c;padding:1px 2px;border-radius:2px}
.hl-y{background:#fff9cc;border-bottom:2px solid #f1c40f;padding:1px 2px;border-radius:2px}
.hl-b{background:#cce5ff;border-bottom:2px solid #3498db;padding:1px 2px;border-radius:2px}
.safe{text-align:center;padding:30px;color:#27ae60;font-size:1.1em}
.footer{text-align:center;font-size:.7em;color:#999;padding:16px}
</style>
</head>
<body>
<div class="header">
<h1>FieldLex 契約リスクスキャナー</h1>
<p>契約書を貼り付けるだけ — 50の危険パターンを即座に検出</p>
<div class="badge">完全オフライン動作・テキスト外部送信なし</div>
</div>
<div class="container">
<div class="card">
<h2>契約書テキストを貼り付け</h2>
<div class="row">
<div><label>業種を選択</label>
<select id="ind"><option value="mfg">製造業</option><option value="con">建設業</option><option value="log">物流業</option></select></div>
<div><label>契約タイプ</label>
<select id="ctype"><option value="all">すべて</option><option value="order">発注書・注文書</option><option value="nda">NDA・秘密保持</option><option value="outsource">業務委託</option></select></div>
</div>
<label>契約書本文</label>
<textarea id="txt" placeholder="ここに契約書のテキストをコピー＆ペーストしてください（社外に一切送信されません）"></textarea>
<button class="btn" onclick="scan()">リスクスキャン実行</button>
</div>
<div id="result"></div>
</div>
<div class="footer">FieldLex v1.0 — SynLab Legal Tech｜本ツールは法的助言ではありません。重要な契約は必ず弁護士にご相談ください。</div>
<script>
const P=[
{p:"無催告[でにて]*解除",l:"r",c:"all",w:"相手がいきなり契約を打ち切れます。通常は催告してから解除するのがルール。一方的に切られ代金回収不能の恐れ。"},
{p:"全額負担",l:"r",c:"all",w:"損害や費用の全額をこちらが被る条文。金額上限がないと想定外の大損害が経営に直結します。"},
{p:"一切の責任を負わない",l:"r",c:"all",w:"相手が何をしても責任ゼロ。不良品・納期遅延でも泣き寝入りになりかねません。"},
{p:"損害賠償.{0,10}(上限.*なし|無制限|制限.{0,5}ない)",l:"r",c:"all",w:"賠償額の天井なし。小さなミスでも青天井の請求リスクがあります。"},
{p:"中途解約.{0,20}(できない|認めない|不可)",l:"r",c:"all",w:"途中でやめられない契約。赤字の取引を続ける羽目になります。"},
{p:"知的財産権.{0,20}(譲渡|帰属.{0,5}甲)",l:"r",c:"all",w:"自社ノウハウ・図面の権利が相手に移ります。自社技術が使えなくなる危険。"},
{p:"契約不適合.{0,15}免責",l:"r",c:"all",w:"納品物に問題があっても相手は直さなくてよい条文。不良品でも文句が言えません。"},
{p:"連帯保証",l:"r",c:"all",w:"代表者個人が会社の債務を背負います。会社倒産時も個人資産で弁済義務。"},
{p:"(一方的|相手方の判断).{0,10}変更",l:"r",c:"all",w:"同意なく契約条件を変えられます。単価の一方的引下げなどに利用されます。"},
{p:"通知.{0,10}(なく|なし|せず).{0,10}変更",l:"r",c:"all",w:"知らないうちに条件が変わる恐れ。変更通知義務がないのは非常に危険。"},
{p:"自動更新",l:"y",c:"all",w:"解約し忘れると延長されます。更新拒否の期限をカレンダーに入れてください。"},
{p:"秘密保持.{0,30}(無期限|期間の定めなし)",l:"y",c:"all",w:"秘密保持義務が永久に続きます。通常3〜5年が相場です。"},
{p:"競業避止",l:"y",c:"all",w:"同業の仕事ができなくなる条文。期間・地域・範囲を確認。"},
{p:"遅延損害金.{0,10}年.{0,5}14\\.6",l:"y",c:"all",w:"年14.6%の高利率。法定上限ですが高い水準です。"},
{p:"相殺.{0,10}禁止",l:"y",c:"all",w:"売掛金の差し引き不可。相手倒産時に回収困難になります。"},
{p:"即時解除",l:"y",c:"all",w:"猶予なく即解除の可能性。通常は30日前通知が標準です。"},
{p:"第三者.{0,10}(譲渡|委託).{0,5}(自由|できる)",l:"y",c:"all",w:"知らない会社に契約が移る可能性。取引先が急に変わるリスク。"},
{p:"(専属的)?合意管轄.{0,10}裁判所",l:"b",c:"all",w:"裁判の場所の取り決め。遠方だと出廷の負担が大きくなります。"},
{p:"反社会的勢力",l:"b",c:"all",w:"反社条項。標準的ですが即時解除条件を確認しましょう。"},
{p:"不可抗力.{0,15}免責",l:"b",c:"all",w:"災害時の免責規定。範囲が広すぎないか確認。通常は問題ありません。"},
{p:"検収完了後.{0,20}(瑕疵|不良|欠陥).{0,10}免責",l:"r",c:"mfg",w:"検収後の不良に対応不可。全数検査が難しい部品では大きなリスク。"},
{p:"品質保証.{0,10}一切",l:"r",c:"mfg",w:"品質保証が一切なし。不良品の交換・修理を要求できません。"},
{p:"納期遅延.{0,15}全額",l:"r",c:"mfg",w:"納期遅れで全額ペナルティ。1日の遅れでも全額返金は過酷。"},
{p:"製造物責任.{0,10}免責",l:"r",c:"mfg",w:"PL法の責任免除。最終製品に組込み時、御社に責任が集中します。"},
{p:"仕様変更.{0,15}費用.{0,10}(受注|乙)",l:"r",c:"mfg",w:"相手都合の仕様変更でもこちらが費用負担。利益を食いつぶします。"},
{p:"金型.{0,15}所有権",l:"y",c:"mfg",w:"自社負担の金型が相手のものになる場合があります。"},
{p:"(図面|技術資料).{0,10}返却",l:"y",c:"mfg",w:"契約終了時の図面返却義務。コピー保持の可否も確認を。"},
{p:"不良品.{0,10}全数(交換|回収)",l:"y",c:"mfg",w:"不良時に全数対応必須。選別・修理の選択肢がないと費用膨大。"},
{p:"原材料.{0,15}価格変動.{0,10}負担",l:"y",c:"mfg",w:"材料費値上がりをこちらが負担。長期契約では大損失に。"},
{p:"下請法",l:"b",c:"mfg",w:"下請法の条文。親事業者なら支払遅延60日ルール等の保護あり。"},
{p:"追加工事.{0,15}費用.{0,5}含",l:"r",c:"con",w:"追加工事が出ても別途請求不可。現場では必ず追加が出るため非常に危険。"},
{p:"天候.{0,10}不可抗力.{0,10}含まない",l:"r",c:"con",w:"悪天候が不可抗力に含まれず。雨天遅延がすべてペナルティ対象に。"},
{p:"安全管理.{0,10}一切.{0,10}責任",l:"r",c:"con",w:"安全管理責任がすべてこちらに。元請の責任免除は不公平。"},
{p:"設計変更.{0,15}費用.{0,10}(請負|乙)",l:"r",c:"con",w:"設計変更費を下請けが負担。建設業法違反の可能性あり。"},
{p:"工期遅延.{0,10}違約金",l:"y",c:"con",w:"違約金率を確認。日額で請負金額の1/1000が目安。それ以上は過大。"},
{p:"(下請|支払).{0,15}60日",l:"y",c:"con",w:"支払期日60日は建設業法の上限ギリギリ。30日を交渉しましょう。"},
{p:"瑕疵担保.{0,10}10年",l:"y",c:"con",w:"10年の瑕疵担保は住宅以外では長すぎ。通常の建築は2年が目安。"},
{p:"近隣.{0,10}苦情.{0,10}(全て|一切).{0,5}負担",l:"y",c:"con",w:"近隣トラブル費用がすべてこちら持ち。元請と分担すべき項目。"},
{p:"元請.{0,10}指示.{0,10}従う",l:"y",c:"con",w:"元請の指示に無条件服従。安全上問題のある指示も拒否不可に。"},
{p:"建設業法",l:"b",c:"con",w:"建設業法への言及。不利な条件の根拠にされていないか確認を。"},
{p:"運送中.{0,15}損害.{0,10}全額.{0,5}負担",l:"r",c:"log",w:"輸送事故の全額負担。高額貨物なら1回の事故で経営危機に。"},
{p:"荷物.{0,10}(紛失|破損).{0,15}責任.{0,5}負わない",l:"r",c:"log",w:"荷主が紛失・破損の責任を取らない条文。梱包不備でも請求不可。"},
{p:"倉庫.{0,10}管理.{0,10}責任.{0,5}一切",l:"r",c:"log",w:"保管中のすべての損害が御社負担。自然災害も含まれる可能性。"},
{p:"配送遅延.{0,10}損害賠償",l:"y",c:"log",w:"遅延時の賠償規定。渋滞や天候など不可抗力の除外があるか確認を。"},
{p:"保険.{0,10}加入.{0,5}義務",l:"y",c:"log",w:"運送保険の加入義務。保険料の負担者と補償範囲を確認。"},
{p:"再委託.{0,10}(自由|制限なし)",l:"y",c:"log",w:"知らない業者への再委託の可能性。品質管理に影響します。"},
{p:"車両.{0,10}費用.{0,5}負担",l:"y",c:"log",w:"車両維持費がこちら持ち。リース契約との二重負担に注意。"},
{p:"燃料費.{0,10}変動.{0,10}負担",l:"y",c:"log",w:"燃料費高騰をこちらが吸収。サーチャージ条項がないと利益消失。"},
{p:"24時間.{0,10}対応",l:"y",c:"log",w:"24時間対応義務。人件費とドライバーの労務管理に直結。"},
{p:"繁忙期.{0,10}(拒否|断).{0,5}できない",l:"y",c:"log",w:"繁忙期でも断れない条文。キャパオーバーで事故リスク増大。"}
];
function esc(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");}
function scan(){
const txt=document.getElementById("txt").value.trim();
if(!txt){alert("契約書テキストを貼り付けてください");return}
const ind=document.getElementById("ind").value;
const hits=[],ranges=[];
P.forEach(rule=>{
if(rule.c!=="all"&&rule.c!==ind)return;
try{const re=new RegExp(rule.p,"g");let m;
while((m=re.exec(txt))!==null){hits.push({...rule,matched:m[0],idx:m.index,len:m[0].length});ranges.push({idx:m.index,len:m[0].length,l:rule.l});}
}catch(e){}});
const rc=hits.filter(h=>h.l==="r").length,yc=hits.filter(h=>h.l==="y").length,bc=hits.filter(h=>h.l==="b").length;
let lv,lvc,lvt;
if(rc>=3){lv="要専門家";lvc="lv-expert";lvt="高リスクパターンが多数。必ず弁護士に相談してからサインしてください。";}
else if(rc>=1){lv="高";lvc="lv-high";lvt="危険な条文が含まれています。上司に報告し専門家に確認を。";}
else if(yc>=3){lv="中";lvc="lv-mid";lvt="注意すべき条文があります。交渉で修正を検討してください。";}
else if(yc>=1||bc>=1){lv="低";lvc="lv-low";lvt="大きなリスクは未検出。検出項目は念のため確認を。";}
else{lv="検出なし";lvc="lv-low";lvt="";}
ranges.sort((a,b)=>b.idx-a.idx);
let et=esc(txt);
const map=[];let ei=0;
for(let i=0;i<txt.length;i++){const c=txt[i];map[i]=ei;if(c==="&")ei+=5;else if(c==="<"||c===">")ei+=4;else ei++;}
map[txt.length]=ei;
const used=[];
ranges.forEach(r=>{
for(const u of used){if(r.idx<u.idx+u.len&&r.idx+r.len>u.idx)return;}
used.push(r);
const si=map[r.idx],se=map[r.idx+r.len];
const cls=r.l==="r"?"hl-r":r.l==="y"?"hl-y":"hl-b";
et=et.slice(0,si)+'<span class="'+cls+'">'+et.slice(si,se)+'</span>'+et.slice(se);
});
let html='<div class="card"><h2>スキャン結果</h2><div class="level-box '+lvc+'">総合危険度：'+lv+'</div>';
if(lvt)html+='<p style="text-align:center;margin-bottom:12px;font-size:.9em">'+lvt+'</p>';
html+='<div class="stats"><div class="stat sr"><b>'+rc+'</b>高リスク</div><div class="stat sy"><b>'+yc+'</b>注意</div><div class="stat sb"><b>'+bc+'</b>確認</div></div></div>';
if(hits.length>0){
html+='<div class="card"><h2>検出パターン（'+hits.length+'件）</h2>';
hits.sort((a,b)=>{const o={r:0,y:1,b:2};return o[a.l]-o[b.l];});
hits.forEach(h=>{
const cn=h.l,ln=h.l==="r"?"高リスク":h.l==="y"?"注意":"確認";
html+='<div class="hit '+cn+'"><span class="tag '+cn+'">'+ln+'</span><span class="phrase">「'+esc(h.matched)+'」</span><div class="warn">→ '+h.w+'</div></div>';});
html+='</div><div class="card"><h2>ハイライト表示</h2><div class="preview">'+et+'</div></div>';
}else{html+='<div class="card"><div class="safe">登録済み50パターンに該当する危険フレーズは検出されませんでした。<br>ただし本ツールで検出できないリスクも存在します。</div></div>';}
document.getElementById("result").innerHTML=html;document.getElementById("result").style.display="block";
document.getElementById("result").scrollIntoView({behavior:"smooth"});}
</script>
</body>
</html>