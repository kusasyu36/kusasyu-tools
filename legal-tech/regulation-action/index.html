<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>è¦åˆ¶å¯¾å¿œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†ãƒœãƒ¼ãƒ‰ - kusasyu tools</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#f0f2f5;--card:#fff;--primary:#1a56db;--danger:#dc2626;--warn:#f59e0b;--ok:#16a34a;--gray:#6b7280;--border:#e5e7eb;--shadow:0 1px 3px rgba(0,0,0,.12)}
body{font-family:-apple-system,BlinkMacSystemFont,"Hiragino Sans",sans-serif;background:var(--bg);color:#1f2937;font-size:14px}
header{background:linear-gradient(135deg,#1e3a5f,#1a56db);color:#fff;padding:12px 20px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px}
header h1{font-size:18px;font-weight:700}
header span{font-size:12px;opacity:.85}
.toolbar{display:flex;gap:8px;padding:12px 16px;flex-wrap:wrap;align-items:center;background:#fff;border-bottom:1px solid var(--border)}
.toolbar button,.toolbar label{font-size:13px;padding:7px 14px;border-radius:6px;border:1px solid var(--border);background:#fff;cursor:pointer;white-space:nowrap}
.toolbar button:hover{background:#f3f4f6}
.btn-primary{background:var(--primary)!important;color:#fff!important;border-color:var(--primary)!important}
.toolbar select{padding:6px 8px;border:1px solid var(--border);border-radius:6px;font-size:13px}
.board{display:flex;gap:12px;padding:12px 16px;overflow-x:auto;min-height:calc(100vh - 160px)}
.column{min-width:240px;flex:1;background:#f8f9fa;border-radius:10px;display:flex;flex-direction:column}
.col-header{padding:10px 12px;font-weight:700;font-size:14px;border-radius:10px 10px 0 0;display:flex;justify-content:space-between;align-items:center}
.col-header .cnt{background:rgba(255,255,255,.7);border-radius:10px;padding:2px 8px;font-size:12px}
.col-confirm .col-header{background:#dbeafe;color:#1e40af}
.col-assess .col-header{background:#fef3c7;color:#92400e}
.col-notify .col-header{background:#ede9fe;color:#5b21b6}
.col-revise .col-header{background:#ffedd5;color:#9a3412}
.col-done .col-header{background:#dcfce7;color:#166534}
.col-body{padding:8px;flex:1;min-height:60px}
.card{background:var(--card);border-radius:8px;padding:10px;margin-bottom:8px;box-shadow:var(--shadow);cursor:grab;border-left:4px solid var(--gray);transition:box-shadow .15s}
.card:hover{box-shadow:0 4px 12px rgba(0,0,0,.15)}
.card .title{font-weight:600;font-size:13px;margin-bottom:4px;word-break:break-all}
.card .meta{font-size:11px;color:var(--gray);display:flex;flex-wrap:wrap;gap:4px 10px;margin-bottom:6px}
.card .tags{display:flex;flex-wrap:wrap;gap:4px;margin-bottom:6px}
.tag{font-size:10px;padding:2px 6px;border-radius:4px;font-weight:600}
.tag-finance{background:#dbeafe;color:#1e40af}
.tag-pharma{background:#fce7f3;color:#9d174d}
.tag-cosmetics{background:#ede9fe;color:#5b21b6}
.tag-all{background:#e5e7eb;color:#374151}
.impact-high{border-left-color:var(--danger)}
.impact-mid{border-left-color:var(--warn)}
.impact-low{border-left-color:var(--ok)}
.deadline{font-size:11px;font-weight:700;padding:2px 6px;border-radius:4px;display:inline-block}
.dl-over{background:#fee2e2;color:#dc2626}
.dl-soon{background:#fef3c7;color:#b45309}
.dl-ok{background:#dcfce7;color:#166534}
.card-actions{display:flex;gap:4px;margin-top:6px}
.card-actions button{font-size:11px;padding:3px 8px;border:1px solid var(--border);border-radius:4px;background:#fff;cursor:pointer}
.card-actions button:hover{background:#f3f4f6}
.card-actions .del{color:var(--danger)}
.overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:100;justify-content:center;align-items:center}
.overlay.show{display:flex}
.modal{background:#fff;border-radius:12px;padding:24px;width:90%;max-width:480px;max-height:90vh;overflow-y:auto}
.modal h2{font-size:16px;margin-bottom:16px}
.modal label{display:block;font-size:13px;font-weight:600;margin:10px 0 4px}
.modal input,.modal select,.modal textarea{width:100%;padding:8px;border:1px solid var(--border);border-radius:6px;font-size:13px}
.modal textarea{height:60px;resize:vertical}
.modal .btn-row{display:flex;gap:8px;margin-top:16px;justify-content:flex-end}
.modal .btn-row button{padding:8px 20px;border-radius:6px;border:none;cursor:pointer;font-size:13px}
.stats{display:flex;gap:12px;padding:8px 16px;flex-wrap:wrap}
.stat-card{background:#fff;border-radius:8px;padding:10px 16px;box-shadow:var(--shadow);text-align:center;min-width:100px}
.stat-card .num{font-size:22px;font-weight:700}
.stat-card .lbl{font-size:11px;color:var(--gray)}
#csvInput{display:none}
@media(max-width:768px){.board{flex-direction:column}.column{min-width:100%}}
</style>
<meta name="description" content="é‡‘èãƒ»è£½è–¬ãƒ»åŒ–ç²§å“ç­‰ã®æ¥­ç¨®åˆ¥ã«ã€æ—¥æœ¬ã®å®˜å…¬åºï¼ˆé‡‘èåºãƒ»åšåŠ´çœãƒ»çµŒç”£çœãƒ»e-Govï¼‰ã®è¦åˆ¶å¤‰æ›´æƒ…å ±ã‚’è‡ªå‹•åé›†ã—ã€è‡ªç¤¾ã¸ã®å½±éŸ¿åº¦ã‚’è¨ºæ–­ã—ã€å¯¾å¿œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹ã¾ã§ã®3ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã€ã™ãä½¿ãˆã‚‹ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦æä¾›ã™ã‚‹ã€‚æµ·å¤–ã§ã¯CUBE Globalï¼ˆ180æ³•åŸŸå¯¾å¿œï¼‰ã‚„Ascent RegTechï¼ˆç´¯è¨ˆ$27Mèª¿é”ï¼‰ãŒ">
<meta name="keywords" content="ãƒªãƒ¼ã‚¬ãƒ«ãƒ†ãƒƒã‚¯,æ³•å‹™AI,å¥‘ç´„æ›¸,è¨´è¨Ÿ,ç„¡æ–™,è¦åˆ¶å¯¾å¿œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†ãƒœãƒ¼ãƒ‰">
<link rel="canonical" href="https://kusasyu36.github.io/kusasyu-tools/legal-tech/regulation-action/">
<meta property="og:title" content="è¦åˆ¶å¯¾å¿œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†ãƒœãƒ¼ãƒ‰ - kusasyu tools">
<meta property="og:description" content="é‡‘èãƒ»è£½è–¬ãƒ»åŒ–ç²§å“ç­‰ã®æ¥­ç¨®åˆ¥ã«ã€æ—¥æœ¬ã®å®˜å…¬åºï¼ˆé‡‘èåºãƒ»åšåŠ´çœãƒ»çµŒç”£çœãƒ»e-Govï¼‰ã®è¦åˆ¶å¤‰æ›´æƒ…å ±ã‚’è‡ªå‹•åé›†ã—ã€è‡ªç¤¾ã¸ã®å½±éŸ¿åº¦ã‚’è¨ºæ–­ã—ã€å¯¾å¿œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹ã¾ã§ã®3ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã€ã™ãä½¿ãˆã‚‹ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦æä¾›ã™ã‚‹ã€‚æµ·å¤–ã§ã¯CUBE Globalï¼ˆ180æ³•åŸŸå¯¾å¿œï¼‰ã‚„Ascent RegTechï¼ˆç´¯è¨ˆ$27Mèª¿é”ï¼‰ãŒ">
<meta property="og:url" content="https://kusasyu36.github.io/kusasyu-tools/legal-tech/regulation-action/">
<meta property="og:type" content="website">
<meta property="og:site_name" content="kusasyu tools">
<meta property="og:locale" content="ja_JP">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="è¦åˆ¶å¯¾å¿œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†ãƒœãƒ¼ãƒ‰ - kusasyu tools">
<meta name="twitter:description" content="é‡‘èãƒ»è£½è–¬ãƒ»åŒ–ç²§å“ç­‰ã®æ¥­ç¨®åˆ¥ã«ã€æ—¥æœ¬ã®å®˜å…¬åºï¼ˆé‡‘èåºãƒ»åšåŠ´çœãƒ»çµŒç”£çœãƒ»e-Govï¼‰ã®è¦åˆ¶å¤‰æ›´æƒ…å ±ã‚’è‡ªå‹•åé›†ã—ã€è‡ªç¤¾ã¸ã®å½±éŸ¿åº¦ã‚’è¨ºæ–­ã—ã€å¯¾å¿œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹ã¾ã§ã®3ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã€ã™ãä½¿ãˆã‚‹ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦æä¾›ã™ã‚‹ã€‚æµ·å¤–ã§ã¯CUBE Globalï¼ˆ180æ³•åŸŸå¯¾å¿œï¼‰ã‚„Ascent RegTechï¼ˆç´¯è¨ˆ$27Mèª¿é”ï¼‰ãŒ">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "è¦åˆ¶å¯¾å¿œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†ãƒœãƒ¼ãƒ‰",
  "description": "é‡‘èãƒ»è£½è–¬ãƒ»åŒ–ç²§å“ç­‰ã®æ¥­ç¨®åˆ¥ã«ã€æ—¥æœ¬ã®å®˜å…¬åºï¼ˆé‡‘èåºãƒ»åšåŠ´çœãƒ»çµŒç”£çœãƒ»e-Govï¼‰ã®è¦åˆ¶å¤‰æ›´æƒ…å ±ã‚’è‡ªå‹•åé›†ã—ã€è‡ªç¤¾ã¸ã®å½±éŸ¿åº¦ã‚’è¨ºæ–­ã—ã€å¯¾å¿œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹ã¾ã§ã®3ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã€ã™ãä½¿ãˆã‚‹ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦æä¾›ã™ã‚‹ã€‚æµ·å¤–ã§ã¯CUBE Globalï¼ˆ180æ³•åŸŸå¯¾å¿œï¼‰ã‚„Ascent RegTechï¼ˆç´¯è¨ˆ$27Mèª¿é”ï¼‰ãŒ",
  "url": "https://kusasyu36.github.io/kusasyu-tools/legal-tech/regulation-action/",
  "applicationCategory": "BusinessApplication",
  "operatingSystem": "Web Browser",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "JPY"
  },
  "author": {
    "@type": "Organization",
    "name": "kusasyu Legal Tech"
  }
}
</script>
</head>
<body>
<header>
<div><h1>RegWatch Japan</h1><span>è¦åˆ¶å¯¾å¿œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†ãƒœãƒ¼ãƒ‰ â€” æ¤œçŸ¥ã‹ã‚‰å¯¾å¿œå®Œäº†ã¾ã§ã®ä¸€æ°—é€šè²«ç®¡ç†</span></div>
<div style="font-size:12px">å¯¾å¿œã‚½ãƒ¼ã‚¹: e-Gov / é‡‘èåº / åšåŠ´çœ / çµŒç”£çœ</div>
</header>
<div class="stats" id="stats"></div>
<div class="toolbar">
<button class="btn-primary" onclick="openModal()">+ æ–°è¦ç™»éŒ²</button>
<label class="btn-primary" for="csvInput" style="cursor:pointer">CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆ</label>
<input type="file" id="csvInput" accept=".csv" onchange="importCSV(event)">
<button onclick="exportCSV()">CSVå‡ºåŠ›</button>
<span>æ¥­ç¨®:</span>
<select id="filterInd" onchange="render()">
<option value="">ã™ã¹ã¦</option>
<option value="finance">é‡‘èï¼ˆéŠ€è¡Œãƒ»è¨¼åˆ¸ãƒ»ä¿é™ºï¼‰</option>
<option value="pharma">è£½è–¬ãƒ»åŒ»ç™‚æ©Ÿå™¨</option>
<option value="cosmetics">åŒ–ç²§å“</option>
</select>
<button onclick="if(confirm('å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ'))clearAll()">ãƒªã‚»ãƒƒãƒˆ</button>
</div>
<div class="board" id="board"></div>
<div class="overlay" id="overlay" onclick="event.target===this&&closeModal()">
<div class="modal">
<h2 id="modalTitle">è¦åˆ¶å¤‰æ›´ã‚’ç™»éŒ²</h2>
<input type="hidden" id="editId">
<label>è¦åˆ¶åç§° *</label><input id="fTitle" placeholder="ä¾‹: é‡‘èå•†å“å–å¼•æ³•æ–½è¡Œä»¤æ”¹æ­£æ¡ˆ">
<label>æƒ…å ±ã‚½ãƒ¼ã‚¹</label>
<select id="fSource"><option>e-Gov ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚³ãƒ¡ãƒ³ãƒˆ</option><option>é‡‘èåº å ±é“ç™ºè¡¨</option><option>åšç”ŸåŠ´åƒçœ æ³•ä»¤ç­‰</option><option>çµŒæ¸ˆç”£æ¥­çœ ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒªãƒªãƒ¼ã‚¹</option><option>ãã®ä»–</option></select>
<label>å¯¾è±¡æ¥­ç¨®</label>
<select id="fInd"><option value="finance">é‡‘èï¼ˆéŠ€è¡Œãƒ»è¨¼åˆ¸ãƒ»ä¿é™ºï¼‰</option><option value="pharma">è£½è–¬ãƒ»åŒ»ç™‚æ©Ÿå™¨</option><option value="cosmetics">åŒ–ç²§å“</option></select>
<label>å½±éŸ¿åº¦</label>
<select id="fImpact"><option value="high">é«˜ï¼ˆé‡å¤§ãªè¦ç¨‹æ”¹å®šãŒå¿…è¦ï¼‰</option><option value="mid">ä¸­ï¼ˆä¸€éƒ¨å¯¾å¿œãŒå¿…è¦ï¼‰</option><option value="low">ä½ï¼ˆæƒ…å ±åé›†ã®ã¿ï¼‰</option></select>
<label>å¯¾å¿œæœŸé™</label><input type="date" id="fDeadline">
<label>æ‹…å½“è€…</label><input id="fAssignee" placeholder="ä¾‹: ç”°ä¸­å¤ªéƒ">
<label>ãƒ¡ãƒ¢</label><textarea id="fMemo" placeholder="èƒŒæ™¯æƒ…å ±ãƒ»å‚ç…§URLç­‰"></textarea>
<div class="btn-row">
<button style="background:#e5e7eb" onclick="closeModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
<button style="background:var(--primary);color:#fff" onclick="saveItem()">ä¿å­˜</button>
</div>
</div>
</div>
<script>
const COLS=[
{id:"confirm",label:"ç¢ºèª"},{id:"assess",label:"è©•ä¾¡"},
{id:"notify",label:"å‘¨çŸ¥"},{id:"revise",label:"è¦ç¨‹æ”¹å®š"},{id:"done",label:"å®Œäº†"}
];
const COL_ICON={confirm:"ğŸ“¥",assess:"ğŸ“Š",notify:"ğŸ“¢",revise:"ğŸ“",done:"âœ…"};
let items=JSON.parse(localStorage.getItem("rw_items")||"[]");
let dragId=null;
function uid(){return Date.now().toString(36)+Math.random().toString(36).slice(2,7)}
function save(){localStorage.setItem("rw_items",JSON.stringify(items))}
function daysLeft(d){if(!d)return null;return Math.ceil((new Date(d)-new Date())/(864e5))}
function esc(s){const d=document.createElement("div");d.textContent=s;return d.innerHTML}

function render(){
const f=document.getElementById("filterInd").value;
const filtered=f?items.filter(i=>i.industry===f):items;
const board=document.getElementById("board");
board.innerHTML="";
COLS.forEach(c=>{
const col=document.createElement("div");
col.className="column col-"+c.id;
const cards=filtered.filter(i=>i.status===c.id);
col.innerHTML='<div class="col-header"><span>'+COL_ICON[c.id]+" "+c.label+'</span><span class="cnt">'+cards.length+"</span></div>"+'<div class="col-body" data-col="'+c.id+'"></div>';
const body=col.querySelector(".col-body");
body.addEventListener("dragover",function(e){e.preventDefault();this.style.background="#e0e7ff"});
body.addEventListener("dragleave",function(){this.style.background=""});
body.addEventListener("drop",function(e){e.preventDefault();this.style.background="";if(dragId){const it=items.find(i=>i.id===dragId);if(it){it.status=c.id;if(c.id==="done")it.completedAt=new Date().toISOString();save();render()}}});
cards.sort((a,b)=>(a.deadline||"9")<(b.deadline||"9")?-1:1).forEach(function(item){
const dl=daysLeft(item.deadline);
let dlClass="dl-ok",dlText="";
if(dl!==null){if(dl<0){dlClass="dl-over";dlText=Math.abs(dl)+"æ—¥è¶…é"}else if(dl<=7){dlClass="dl-soon";dlText="æ®‹ã‚Š"+dl+"æ—¥"}else{dlText="æ®‹ã‚Š"+dl+"æ—¥"}}
const indMap={finance:["é‡‘è","tag-finance"],pharma:["è£½è–¬","tag-pharma"],cosmetics:["åŒ–ç²§å“","tag-cosmetics"]};
const pair=indMap[item.industry]||["ãã®ä»–","tag-all"];
const card=document.createElement("div");
card.className="card impact-"+item.impact;
card.draggable=true;
card.addEventListener("dragstart",function(){dragId=item.id});
card.addEventListener("dragend",function(){dragId=null});
card.innerHTML='<div class="title">'+esc(item.title)+"</div>"+
'<div class="tags"><span class="tag '+pair[1]+'">'+pair[0]+'</span><span class="tag" style="background:#f3f4f6">'+esc(item.source||"")+"</span></div>"+
'<div class="meta">'+(item.assignee?"ğŸ‘¤ "+esc(item.assignee):"<em>æœªã‚¢ã‚µã‚¤ãƒ³</em>")+(dlText?' &nbsp;| <span class="deadline '+dlClass+'">'+dlText+"</span>":"")+"</div>"+
(item.memo?'<div style="font-size:11px;color:#6b7280;margin-top:2px">'+esc(item.memo).slice(0,60)+"</div>":"")+
'<div class="card-actions">'+(c.id!=="done"?'<button onclick="advance(\''+item.id+"')\">æ¬¡ã¸ â†’</button>":"")+
'<button onclick="openModal(\''+item.id+"')\">ç·¨é›†</button>"+
'<button class="del" onclick="delItem(\''+item.id+"')\">å‰Šé™¤</button></div>";
body.appendChild(card)});
board.appendChild(col)});
renderStats(filtered)}

function renderStats(list){
const total=list.length,done=list.filter(i=>i.status==="done").length;
const overdue=list.filter(i=>i.status!=="done"&&daysLeft(i.deadline)!==null&&daysLeft(i.deadline)<0).length;
const soon=list.filter(i=>i.status!=="done"&&daysLeft(i.deadline)!==null&&daysLeft(i.deadline)>=0&&daysLeft(i.deadline)<=7).length;
document.getElementById("stats").innerHTML=
'<div class="stat-card"><div class="num">'+total+'</div><div class="lbl">ç·ä»¶æ•°</div></div>'+
'<div class="stat-card"><div class="num" style="color:var(--ok)">'+done+'</div><div class="lbl">å®Œäº†</div></div>'+
'<div class="stat-card"><div class="num" style="color:var(--danger)">'+overdue+'</div><div class="lbl">æœŸé™è¶…é</div></div>'+
'<div class="stat-card"><div class="num" style="color:var(--warn)">'+soon+'</div><div class="lbl">7æ—¥ä»¥å†…</div></div>'+
'<div class="stat-card"><div class="num">'+(total?Math.round(done/total*100):0)+'%</div><div class="lbl">å®Œäº†ç‡</div></div>'}

function openModal(id){
document.getElementById("overlay").classList.add("show");
if(id){
const it=items.find(i=>i.id===id);if(!it)return;
document.getElementById("modalTitle").textContent="è¦åˆ¶å¤‰æ›´ã‚’ç·¨é›†";
document.getElementById("editId").value=id;
document.getElementById("fTitle").value=it.title;
document.getElementById("fSource").value=it.source||"";
document.getElementById("fInd").value=it.industry;
document.getElementById("fImpact").value=it.impact;
document.getElementById("fDeadline").value=it.deadline||"";
document.getElementById("fAssignee").value=it.assignee||"";
document.getElementById("fMemo").value=it.memo||"";
}else{
document.getElementById("modalTitle").textContent="è¦åˆ¶å¤‰æ›´ã‚’ç™»éŒ²";
document.getElementById("editId").value="";
["fTitle","fAssignee","fMemo"].forEach(function(x){document.getElementById(x).value=""});
document.getElementById("fDeadline").value=""}}

function closeModal(){document.getElementById("overlay").classList.remove("show")}

function saveItem(){
var title=document.getElementById("fTitle").value.trim();
if(!title)return alert("è¦åˆ¶åç§°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
var data={title:title,source:document.getElementById("fSource").value,industry:document.getElementById("fInd").value,impact:document.getElementById("fImpact").value,deadline:document.getElementById("fDeadline").value,assignee:document.getElementById("fAssignee").value.trim(),memo:document.getElementById("fMemo").value.trim()};
var eid=document.getElementById("editId").value;
if(eid){var it=items.find(i=>i.id===eid);if(it)Object.assign(it,data)}
else items.push(Object.assign({id:uid(),status:"confirm",createdAt:new Date().toISOString()},data));
save();closeModal();render()}

function delItem(id){if(confirm("å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")){items=items.filter(i=>i.id!==id);save();render()}}
function advance(id){var it=items.find(i=>i.id===id);if(!it)return;var idx=COLS.findIndex(c=>c.id===it.status);if(idx<COLS.length-1){it.status=COLS[idx+1].id;if(it.status==="done")it.completedAt=new Date().toISOString();save();render()}}
function clearAll(){items=[];save();render()}

function importCSV(e){
var file=e.target.files[0];if(!file)return;
var r=new FileReader();
r.onload=function(ev){
var lines=ev.target.result.split("\n").filter(l=>l.trim());
if(lines.length<2)return alert("CSVã«ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“");
var hdr=lines[0].split(",").map(h=>h.trim().replace(/^"|"$/g,""));
var map={};
["title","source","industry","impact","deadline","assignee","memo","status"].forEach(function(k){
var idx=hdr.findIndex(function(h){
h=h.toLowerCase();
return h===k||(h==="è¦åˆ¶åç§°"&&k==="title")||(h==="æƒ…å ±ã‚½ãƒ¼ã‚¹"&&k==="source")||(h==="æ¥­ç¨®"&&k==="industry")||(h==="å½±éŸ¿åº¦"&&k==="impact")||(h==="æœŸé™"&&k==="deadline")||(h==="æ‹…å½“è€…"&&k==="assignee")||(h==="ãƒ¡ãƒ¢"&&k==="memo")||(h==="ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"&&k==="status")});
if(idx>=0)map[k]=idx});
if(map.title===undefined)return alert("title ã¾ãŸã¯ è¦åˆ¶åç§° åˆ—ãŒå¿…è¦ã§ã™");
var cnt=0;
for(var i=1;i<lines.length;i++){
var vals=lines[i].match(/(".*?"|[^,]*)/g)||[];
var get=function(k){return map[k]!==undefined?(vals[map[k]]||"").trim().replace(/^"|"$/g,""):""};
var t=get("title");if(!t)continue;
items.push({id:uid(),title:t,source:get("source")||"ãã®ä»–",industry:get("industry")||"finance",impact:get("impact")||"mid",deadline:get("deadline"),assignee:get("assignee"),memo:get("memo"),status:get("status")||"confirm",createdAt:new Date().toISOString()});
cnt++}
save();render();alert(cnt+"ä»¶ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ")};
r.readAsText(file);e.target.value=""}

function exportCSV(){
var csv="title,source,industry,impact,deadline,assignee,memo,status\n";
items.forEach(function(i){csv+=[i.title,i.source,i.industry,i.impact,i.deadline||"",i.assignee||"",i.memo||"",i.status].map(function(v){return '"'+String(v).replace(/"/g,'""')+'"'}).join(",")+"\n"});
var blob=new Blob(["\uFEFF"+csv],{type:"text/csv"});
var a=document.createElement("a");a.href=URL.createObjectURL(blob);
a.download="regwatch_actions_"+new Date().toISOString().slice(0,10)+".csv";a.click()}

if(!localStorage.getItem("rw_items")){
items=[
{id:uid(),title:"é‡‘èå•†å“å–å¼•æ³•æ–½è¡Œä»¤æ”¹æ­£æ¡ˆï¼ˆãƒ‡ã‚¸ã‚¿ãƒ«è¨¼åˆ¸é–¢é€£ï¼‰",source:"é‡‘èåº å ±é“ç™ºè¡¨",industry:"finance",impact:"high",deadline:"2026-03-15",assignee:"ç”°ä¸­å¤ªéƒ",memo:"e-Govãƒ‘ãƒ–ã‚³ãƒ¡ç· åˆ‡3/15ã€‚ç¤¾å†…è¦ç¨‹ã¸ã®å½±éŸ¿å¤§",status:"assess",createdAt:"2026-02-20T09:00:00Z"},
{id:uid(),title:"çŠ¯ç½ªåç›Šç§»è»¢é˜²æ­¢æ³• ç›£ç£æŒ‡é‡æ”¹æ­£",source:"é‡‘èåº å ±é“ç™ºè¡¨",industry:"finance",impact:"mid",deadline:"2026-04-01",assignee:"éˆ´æœ¨èŠ±å­",memo:"KYCæ‰‹ç¶šãè¦‹ç›´ã—ã®å¯èƒ½æ€§",status:"confirm",createdAt:"2026-02-22T10:00:00Z"},
{id:uid(),title:"è–¬æ©Ÿæ³•æ–½è¡Œè¦å‰‡ä¸€éƒ¨æ”¹æ­£ï¼ˆGMPé–¢é€£ï¼‰",source:"åšç”ŸåŠ´åƒçœ æ³•ä»¤ç­‰",industry:"pharma",impact:"high",deadline:"2026-03-31",assignee:"",memo:"è£½é€ ç®¡ç†åŸºæº–ã®æ”¹å®šã€‚å“è³ªä¿è¨¼éƒ¨ã¨é€£æºå¿…è¦",status:"confirm",createdAt:"2026-02-23T08:00:00Z"},
{id:uid(),title:"åŒ–ç²§å“åŸºæº– åˆ¥è¡¨æ”¹æ­£æ¡ˆ",source:"e-Gov ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚³ãƒ¡ãƒ³ãƒˆ",industry:"cosmetics",impact:"mid",deadline:"2026-04-15",assignee:"ä½è—¤ç¾å’²",memo:"æˆåˆ†è¦åˆ¶ã®è¿½åŠ ã€‚è©²å½“è£½å“ã®ç¢ºèªãŒå¿…è¦",status:"notify",createdAt:"2026-02-18T11:00:00Z"},
{id:uid(),title:"è³‡é‡‘æ±ºæ¸ˆæ³•æ”¹æ­£ã«ä¼´ã†å†…é–£åºœä»¤æ¡ˆ",source:"e-Gov ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚³ãƒ¡ãƒ³ãƒˆ",industry:"finance",impact:"high",deadline:"2026-03-10",assignee:"ç”°ä¸­å¤ªéƒ",memo:"ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚³ã‚¤ãƒ³è¦åˆ¶ã€‚æš—å·è³‡ç”£é–¢é€£éƒ¨ç½²ã¨å”è­°æ¸ˆã¿",status:"revise",createdAt:"2026-02-10T09:00:00Z"},
{id:uid(),title:"çµŒç”£çœ é›»å­å•†å–å¼•ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³æ”¹è¨‚",source:"çµŒæ¸ˆç”£æ¥­çœ ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒªãƒªãƒ¼ã‚¹",industry:"finance",impact:"low",deadline:"2026-05-01",assignee:"å±±ç”°æ¬¡éƒ",memo:"æƒ…å ±åé›†æ®µéšã€‚ç›´æ¥çš„ãªè¦ç¨‹æ”¹å®šã¯ä¸è¦ã®è¦‹è¾¼ã¿",status:"done",createdAt:"2026-02-01T09:00:00Z",completedAt:"2026-02-20T16:00:00Z"}
];save()}
render();
</script>
</body>
</html>